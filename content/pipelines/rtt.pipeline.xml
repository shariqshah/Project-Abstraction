<!-- Render to Texture Pipeline -->
<Pipeline>
    <Setup>
	    <RenderTarget id="RTTBUF" depthBuf="true" numColBufs="1" format="RGBA32F" scale="1.0"/>
    </Setup>
	<CommandQueue>
	  <Stage id="Geometry" link="pipelines/globalSettings.material.xml">
		    <SwitchTarget target="RTTBUF" />
			<ClearTarget depthBuf="true" colBuf0="true" col_R="0.5" col_G="0.5" col_B="0.6"/>
			
			<DrawGeometry context="AMBIENT" class="~Translucent" />
			<DoForwardLightLoop class="~Translucent" />
			
			<DrawGeometry context="TRANSLUCENT" class="Translucent" order="BACK_TO_FRONT" />
		</Stage>
		
		<Stage id="Overlays">
			<DrawOverlays context="OVERLAY" />
		</Stage>

		<Stage id="Copy">
			<SwitchTarget target="" />
			<BindBuffer sampler="buf0" sourceRT="RTTBUF" bufIndex="0" />
			<DrawQuad material="pipelines/justcopy.material.xml" context="FINALPASS" />
			<UnbindBuffers />
		</Stage>
		
	</CommandQueue>
</Pipeline>
